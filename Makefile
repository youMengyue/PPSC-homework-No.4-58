# Makefile

# Компилятор
CXX = g++

# --- Стандартные флаги с оптимизацией и автовекторизацией ---
CXXFLAGS_VEC = -std=c++17 -O3 -Wall -msse2

# --- Флаги с оптимизацией, НО с принудительно ОТКЛЮЧЕННОЙ автовекторизацией ---
CXXFLAGS_NO_VEC = -std=c++17 -O3 -Wall -msse2 -fno-tree-vectorize

# Имя итогового исполняемого файла
TARGET = homework_58

# Исходные файлы
SRCS = main.cpp

# Цель по умолчанию (с автовекторизацией)
all:
	$(CXX) $(CXXFLAGS_VEC) -o $(TARGET) $(SRCS)

# Запуск версии с автовекторизацией
run: all
	./$(TARGET)

# --- Новые цели для эксперимента ---

# Сборка версии без автовекторизации
build_no_vec:
	$(CXX) $(CXXFLAGS_NO_VEC) -o $(TARGET) $(SRCS)

# Запуск версии без автовекторизации, чтобы увидеть РЕАЛЬНУЮ разницу
run_no_vec: build_no_vec
	@echo ""
	@echo "--- Запуск версии с ОТКЛЮЧЕННОЙ автовекторизацией ---"
	./$(TARGET)

# Цель для очистки
clean:
	rm -f $(TARGET)
